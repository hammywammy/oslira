<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="icon" type="image/png" href="/assets/images/oslira-logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Security-Policy" 
          content="default-src 'self'; 
                   script-src 'self' https://js.stripe.com https://cdn.jsdelivr.net 'unsafe-inline';
                   style-src 'self' 'unsafe-inline';
                   connect-src 'self' https://*.supabase.co https://*.workers.dev https://api.stripe.com; 
                   img-src 'self' data: https:;
                   frame-src https://js.stripe.com;">
    <title>Subscription & Billing - Oslira</title>
    <script src="/env-config.js"></script>
    <link rel="stylesheet" href="/subscription/subscription.css">
</head>
<body>
    <a href="#main-content" class="skip-nav">Skip to main content</a>
    
    <div class="dashboard">
        <aside class="sidebar">
            <div class="logo">
                <img src="/assets/images/oslira-logo.png" alt="Oslira Logo" class="logo-image">
                Oslira
            </div>
            
            <nav class="menu">
                <div class="menu-section">
                    <h4>Main</h4>
                    <a href="/dashboard.html">
                        <span class="icon">üìä</span>
                        Dashboard
                    </a>
                    <a href="/leads.html">
                        <span class="icon">üîç</span>
                        Lead Intelligence
                    </a>
                    <a href="/analytics.html">
                        <span class="icon">üìà</span>
                        Analytics
                    </a>
                </div>
                
                <div class="menu-section">
                    <h4>Tools</h4>
                    <a href="/bulk-upload.html">
                        <span class="icon">üì§</span>
                        Bulk Research
                    </a>
                    <a href="/messages.html">
                        <span class="icon">üí¨</span>
                        Message Studio
                    </a>
                    <a href="/integrations.html">
                        <span class="icon">üîó</span>
                        Integrations
                    </a>
                </div>
                
                <div class="menu-section">
                    <h4>Account</h4>
                    <a href="/subscription.html" class="active">
                        <span class="icon">üí≥</span>
                        Subscription & Billing
                    </a>
                    <a href="/settings.html">
                        <span class="icon">‚öôÔ∏è</span>
                        Settings
                    </a>
                </div>
            </nav>
            
            <div class="subscription-status">
                <h4>Current Plan</h4>
                <p class="plan-name" id="sidebar-plan">Loading...</p>
                <p class="next-billing" id="sidebar-billing">Next billing: Loading...</p>
            </div>
            
            <div class="user-info">
                <p id="user-email">Loading...</p>
                <a href="#" id="logout-link">Sign Out</a>
            </div>
        </aside>
        
        <main role="main" id="main-content" class="main-content">
            <!-- Page Header -->
            <header class="page-header">
                <h1>Subscription & Billing</h1>
                <p>Manage your monthly subscription and billing preferences. Scale your lead research with flexible plans designed for growing teams.</p>
            </header>

            <!-- Current Subscription -->
            <section class="current-subscription">
                <h2>Your Current Plan</h2>
                <div class="current-plan" id="current-plan-name">Free Plan</div>
                <div class="plan-details" id="plan-details">0 monthly credits ‚Ä¢ Limited features</div>
                <div class="subscription-info" id="subscription-info">
                    üí° <strong>Upgrade today</strong> to unlock unlimited lead analysis and advanced features
                </div>
            </section>

            <!-- Pricing Section -->
            <section class="pricing-section">
                <div class="section-header">
                    <h2>Choose Your Monthly Plan</h2>
                    <p>Flexible monthly subscriptions that scale with your business needs</p>
                </div>

                <div class="pricing-grid">
                    <!-- Starter Plan -->
                    <div class="pricing-card" data-plan="starter">
                        <div class="card-header">
                            <h3 class="card-title">Starter</h3>
                            <div class="card-price">
                                <span class="currency">$</span>29
                            </div>
                            <div class="card-billing">per month</div>
                            <div class="card-credits">50 monthly credits included</div>
                        </div>
                        <ul class="card-features">
                            <li>50 lead analyses per month</li>
                            <li>Basic lead intelligence</li>
                            <li>Email support</li>
                            <li>Standard analytics dashboard</li>
                            <li>CSV export</li>
                            <li>Basic API access</li>
                        </ul>
                        <button class="card-button">
                            Start Free Trial
                        </button>
                    </div>

                    <!-- Growth Plan - Popular -->
                    <div class="pricing-card popular" data-plan="growth">
                        <div class="popular-badge">Most Popular</div>
                        <div class="card-header">
                            <h3 class="card-title">Growth</h3>
                            <div class="card-price">
                                <span class="currency">$</span>79
                            </div>
                            <div class="card-billing">per month</div>
                            <div class="card-credits">150 monthly credits included</div>
                            <div class="card-savings">Save $8/month vs Starter</div>
                        </div>
                        <ul class="card-features">
                            <li>150 lead analyses per month</li>
                            <li>Advanced lead intelligence</li>
                            <li>Priority email support</li>
                            <li>Advanced analytics & reporting</li>
                            <li>Full API access</li>
                            <li>Bulk processing (up to 100)</li>
                            <li>Custom integrations</li>
                            <li>Team collaboration tools</li>
                        </ul>
                        <button class="card-button">
                            Start Free Trial
                        </button>
                    </div>

                    <!-- Professional Plan -->
                    <div class="pricing-card" data-plan="professional">
                        <div class="card-header">
                            <h3 class="card-title">Professional</h3>
                            <div class="card-price">
                                <span class="currency">$</span>199
                            </div>
                            <div class="card-billing">per month</div>
                            <div class="card-credits">500 monthly credits included</div>
                            <div class="card-savings">Save $37/month vs Growth</div>
                        </div>
                        <ul class="card-features">
                            <li>500 lead analyses per month</li>
                            <li>Premium lead intelligence</li>
                            <li>Live chat support</li>
                            <li>Advanced reporting suite</li>
                            <li>Unlimited API access</li>
                            <li>Bulk processing (up to 500)</li>
                            <li>White-label options</li>
                            <li>Priority processing queue</li>
                            <li>Advanced team management</li>
                            <li>Custom data enrichment</li>
                        </ul>
                        <button class="card-button">
                            Start Free Trial
                        </button>
                    </div>

                    <!-- Enterprise Plan -->
                    <div class="pricing-card" data-plan="enterprise">
                        <div class="card-header">
                            <h3 class="card-title">Enterprise</h3>
                            <div class="card-price">
                                <span class="currency">$</span>499
                            </div>
                            <div class="card-billing">per month</div>
                            <div class="card-credits">Unlimited monthly credits</div>
                            <div class="card-savings">Best value for teams</div>
                        </div>
                        <ul class="card-features">
                            <li>Unlimited lead analyses</li>
                            <li>Enterprise lead intelligence</li>
                            <li>24/7 phone & chat support</li>
                            <li>Dedicated account manager</li>
                            <li>Custom AI model training</li>
                            <li>SLA guarantees (99.9% uptime)</li>
                            <li>Unlimited bulk processing</li>
                            <li>On-premise deployment option</li>
                            <li>Advanced security & compliance</li>
                            <li>Custom reporting & analytics</li>
                            <li>SSO integration</li>
                            <li>Priority feature requests</li>
                        </ul>
                        <button class="card-button">
                            Contact Sales
                        </button>
                    </div>
                </div>
            </section>

            <!-- Billing Information -->
            <section class="billing-section">
                <div class="billing-header">
                    <h3>Billing Information</h3>
                    <button class="manage-billing-btn" id="manage-billing-btn">
                        Manage Billing
                    </button>
                </div>
                
                <div class="billing-info">
                    <div class="billing-item">
                        <h4>Current Plan</h4>
                        <p id="billing-current-plan">Free Plan</p>
                    </div>
                    <div class="billing-item">
                        <h4>Next Billing Date</h4>
                        <p id="next-billing-date">No active subscription</p>
                    </div>
                    <div class="billing-item">
                        <h4>Monthly Cost</h4>
                        <p id="monthly-cost">$0.00</p>
                    </div>
                    <div class="billing-item">
                        <h4>Credits Remaining</h4>
                        <p id="credits-remaining">0 / 0</p>
                    </div>
                </div>
            </section>

            <!-- Billing History -->
            <section class="history-section">
                <div class="history-header">
                    <h3>Billing History</h3>
                </div>
                
                <table class="history-table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Description</th>
                            <th>Amount</th>
                            <th>Status</th>
                            <th>Invoice</th>
                        </tr>
                    </thead>
                    <tbody id="billing-history">
                        <!-- Data populated by JavaScript -->
                    </tbody>
                </table>
            </section>
        </main>
    </div>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script src="/core_utils/shared-code.js"></script>
<script src="/subscription/subscription.js" defer></script>
</body>
</html>
