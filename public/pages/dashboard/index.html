<!DOCTYPE html>
<html lang="en">
<head>
    <script src="/core/script-loader.js"></script>
    <link rel="icon" type="image/png" href="/assets/images/oslira-logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Oslira</title>
    
    <!-- Load Tailwind CSS -->
    <link rel="stylesheet" href="/assets/css/tailwind.css?v=4">
    
    <!-- Custom White Theme Styles -->
    <style>
        body {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            min-height: 100vh;
        }
        
        .white-card {
            background: white;
            border-radius: 16px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(226, 232, 240, 0.8);
            transition: all 0.3s ease;
        }
        
        .white-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-2px);
        }
        
        .action-card {
            background: white;
            border-radius: 20px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(226, 232, 240, 0.8);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .action-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-4px);
        }
        
        .icon-wrapper {
            width: 64px;
            height: 64px;
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 24px;
            transition: all 0.3s ease;
        }
        
        .icon-wrapper.orange {
            background: linear-gradient(135deg, #f97316 0%, #ea580c 100%);
        }
        
        .icon-wrapper.blue {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
        }
        
        .icon-wrapper.green {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
        }
        
        .icon-wrapper.purple {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
        }
        
        .stat-card {
            background: white;
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(226, 232, 240, 0.8);
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            transform: translateY(-2px);
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .trend-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }
        
        .trend-up {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            color: #166534;
        }
        
        .trend-down {
            background: linear-gradient(135deg, #fef2f2 0%, #fecaca 100%);
            color: #991b1b;
        }
        
        .table-container {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            border: 1px solid rgba(226, 232, 240, 0.8);
        }
        
        .table-header {
            background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);
            border-bottom: 1px solid #e2e8f0;
        }
        
        .table-row {
            border-bottom: 1px solid rgba(226, 232, 240, 0.5);
            transition: all 0.2s ease;
        }
        
        .table-row:hover {
            background: rgba(248, 250, 252, 0.5);
        }
        
        .avatar {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            object-fit: cover;
        }
        
        .platform-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .platform-linkedin {
            background: rgba(59, 130, 246, 0.1);
            color: #1d4ed8;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .platform-instagram {
            background: rgba(168, 85, 247, 0.1);
            color: #7c3aed;
            border: 1px solid rgba(168, 85, 247, 0.2);
        }
        
        .platform-tiktok {
            background: rgba(236, 72, 153, 0.1);
            color: #be185d;
            border: 1px solid rgba(236, 72, 153, 0.2);
        }
        
        .analysis-badge {
            padding: 6px 16px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }
        
        .analysis-strong {
            background: rgba(16, 185, 129, 0.1);
            color: #059669;
            border: 1px solid rgba(16, 185, 129, 0.2);
        }
        
        .analysis-moderate {
            background: rgba(59, 130, 246, 0.1);
            color: #1d4ed8;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }
        
        .analysis-low {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
            border: 1px solid rgba(245, 158, 11, 0.2);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            border: none;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(59, 130, 246, 0.3);
        }
        
        .btn-secondary {
            background: white;
            color: #64748b;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            border: 1px solid #e2e8f0;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }
        
        .btn-secondary:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
            transform: translateY(-2px);
        }
        
        .mobile-menu-btn {
            position: fixed;
            top: 16px;
            left: 16px;
            z-index: 50;
            background: white;
            border: 1px solid #e2e8f0;
            border-radius: 12px;
            padding: 12px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            cursor: pointer;
        }
        
        .sidebar-overlay {
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 30;
            backdrop-filter: blur(4px);
        }
        
        @media (min-width: 1024px) {
            .mobile-menu-btn {
                display: none;
            }
        }
    </style>
    
    <!-- Load existing alert system -->
    <script src="/utils/alert-system.js"></script>
</head>
<body>
    <!-- Skip Navigation -->
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded-lg z-50">Skip to main content</a>
    
    <!-- Mobile menu button -->
    <button id="mobile-menu-btn" class="mobile-menu-btn lg:hidden">
        <svg class="w-6 h-6 text-gray-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Sidebar overlay for mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay hidden lg:hidden"></div>
    
    <!-- Dashboard Layout -->
    <div class="min-h-screen">
        <!-- Sidebar Container -->
        <aside id="sidebar-container"></aside>
        
        <!-- Main Content Area -->
        <main role="main" id="main-content" class="ml-0 lg:ml-64 p-6 lg:p-8">
            
            <!-- Header Section -->
            <div class="mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-2">Dashboard</h1>
                <p class="text-gray-600 text-lg">Manage your leads with AI-powered insights</p>
            </div>
            
            <!-- CTA Buttons -->
            <div class="flex flex-wrap items-center gap-4 mb-8">
                <button onclick="dashboard.showAnalysisModal()" class="btn-primary">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                    </svg>
                    Research Lead
                </button>
                <button onclick="dashboard.showBulkUpload()" class="btn-secondary">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                    </svg>
                    Bulk Upload
                </button>
            </div>

            <!-- Quick Actions Grid -->
            <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6 mb-8">
                <!-- Research Lead Card -->
                <div class="action-card" onclick="dashboard.showAnalysisModal()">
                    <div class="icon-wrapper orange">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Research Lead</h3>
                    <p class="text-gray-600 text-center leading-relaxed">Instant AI analysis of Instagram profiles with detailed insights</p>
                </div>
                
                <!-- Bulk Upload Card -->
                <div class="action-card" onclick="dashboard.showBulkUpload()">
                    <div class="icon-wrapper blue">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Bulk Upload</h3>
                    <p class="text-gray-600 text-center leading-relaxed">Upload hundreds of leads instantly for mass analysis</p>
                </div>
                
                <!-- Export Data Card -->
                <div class="action-card" onclick="dashboard.exportData()">
                    <div class="icon-wrapper green">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Export Data</h3>
                    <p class="text-gray-600 text-center leading-relaxed">Download leads in CSV, Excel, or JSON formats</p>
                </div>
                
                <!-- Analytics Card -->
                <div class="action-card" onclick="dashboard.openAnalytics()">
                    <div class="icon-wrapper purple">
                        <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                        </svg>
                    </div>
                    <h3 class="text-xl font-bold text-gray-900 mb-3 text-center">Analytics</h3>
                    <p class="text-gray-600 text-center leading-relaxed">Deep insights and performance metrics dashboard</p>
                </div>
            </div>

            <!-- Stats Section -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- Total Leads -->
                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(249, 115, 22, 0.1) 0%, rgba(234, 88, 12, 0.1) 100%); color: #ea580c;">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                        <div class="trend-badge trend-up">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            +32%
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-2">4</div>
                    <div class="text-gray-600 font-medium mb-1">Total Leads</div>
                    <div class="text-gray-400 text-sm">this week</div>
                </div>
                
                <!-- Analyzed -->
                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.1) 0%, rgba(29, 78, 216, 0.1) 100%); color: #1d4ed8;">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="trend-badge trend-up">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            +18%
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-2">3</div>
                    <div class="text-gray-600 font-medium mb-1">Analyzed</div>
                    <div class="text-gray-400 text-sm">this week</div>
                </div>
                
                <!-- Pending -->
                <div class="stat-card">
                    <div class="flex items-center justify-between mb-4">
                        <div class="stat-icon" style="background: linear-gradient(135deg, rgba(16, 185, 129, 0.1) 0%, rgba(5, 150, 105, 0.1) 100%); color: #059669;">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="trend-badge trend-down">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="transform: rotate(180deg);">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            -12%
                        </div>
                    </div>
                    <div class="text-3xl font-bold text-gray-900 mb-2">0</div>
                    <div class="text-gray-600 font-medium mb-1">Pending</div>
                    <div class="text-gray-400 text-sm">processing now</div>
                </div>
            </div>

            <!-- Lead Management Section -->
            <div class="white-card p-6 mb-8">
                <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6">
                    <div class="mb-4 lg:mb-0">
                        <h2 class="text-2xl font-bold text-gray-900 mb-2">Lead Management</h2>
                        <p class="text-gray-600">Track and analyze your lead pipeline with advanced AI insights</p>
                    </div>
                    <div class="flex flex-wrap items-center gap-3">
                        <select class="px-4 py-2 border border-gray-200 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>All Platforms</option>
                            <option>Instagram</option>
                            <option>LinkedIn</option>
                            <option>TikTok</option>
                        </select>
                        
                        <select class="px-4 py-2 border border-gray-200 rounded-lg text-gray-700 focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            <option>All Analysis Types</option>
                            <option>Strong Analysis</option>
                            <option>Moderate Analysis</option>
                            <option>Light Analysis</option>
                        </select>
                        
                        <button onclick="dashboard.refreshData()" class="btn-secondary">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Table -->
                <div class="table-container">
                    <div class="table-header p-4">
                        <div class="grid grid-cols-12 gap-4 items-center font-medium text-gray-700 text-sm">
                            <div class="col-span-1">
                                <input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                            </div>
                            <div class="col-span-3">Profile</div>
                            <div class="col-span-2 text-center">Platform</div>
                            <div class="col-span-2 text-center">Analysis</div>
                            <div class="col-span-2 text-center">Date</div>
                            <div class="col-span-2 text-center">Actions</div>
                        </div>
                    </div>
                    
                    <!-- Table Rows -->
                    <div class="divide-y divide-gray-100">
                        <!-- Row 1 -->
                        <div class="table-row p-4">
                            <div class="grid grid-cols-12 gap-4 items-center">
                                <div class="col-span-1">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                </div>
                                <div class="col-span-3">
                                    <div class="flex items-center space-x-3">
                                        <img src="/assets/images/default-avatar.png" alt="@poky" class="avatar">
                                        <div>
                                            <div class="font-semibold text-gray-900">@poky</div>
                                            <div class="text-gray-500 text-sm">Social Media Influencer</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="platform-badge platform-linkedin">
                                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                                        </svg>
                                        LinkedIn
                                    </span>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="analysis-badge analysis-strong">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        Strong Analysis
                                    </span>
                                </div>
                                <div class="col-span-2 text-center text-gray-600">
                                    <div class="font-medium">2 days ago</div>
                                    <div class="text-sm text-gray-400">12:45 AM</div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <button onclick="dashboard.openLeadDetails('1')" class="btn-primary text-sm px-4 py-2">
                                        Analysis
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 2 -->
                        <div class="table-row p-4">
                            <div class="grid grid-cols-12 gap-4 items-center">
                                <div class="col-span-1">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus :ring-blue-500">
                                </div>
                                <div class="col-span-3">
                                    <div class="flex items-center space-x-3">
                                        <img src="/assets/images/default-avatar.png" alt="@bobby" class="avatar">
                                        <div>
                                            <div class="font-semibold text-gray-900">@bobby</div>
                                            <div class="text-gray-500 text-sm">Content Creator</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="platform-badge platform-tiktok">
                                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"/>
                                        </svg>
                                        TikTok
                                    </span>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="analysis-badge analysis-low">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                        </svg>
                                        Low Analysis
                                    </span>
                                </div>
                                <div class="col-span-2 text-center text-gray-600">
                                    <div class="font-medium">2 days ago</div>
                                    <div class="text-sm text-gray-400">12:44 AM</div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <button onclick="dashboard.openLeadDetails('2')" class="btn-primary text-sm px-4 py-2">
                                        Analysis
                                    </button>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Row 3 -->
                        <div class="table-row p-4">
                            <div class="grid grid-cols-12 gap-4 items-center">
                                <div class="col-span-1">
                                    <input type="checkbox" class="w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500">
                                </div>
                                <div class="col-span-3">
                                    <div class="flex items-center space-x-3">
                                        <img src="/assets/images/default-avatar.png" alt="@james" class="avatar">
                                        <div>
                                            <div class="font-semibold text-gray-900">@james</div>
                                            <div class="text-gray-500 text-sm">Digital Entrepreneur</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="platform-badge platform-instagram">
                                        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                        </svg>
                                        Instagram
                                    </span>
                                </div>
                                <div class="col-span-2 text-center">
                                    <span class="analysis-badge analysis-moderate">
                                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        Deep Analysis
                                    </span>
                                </div>
                                <div class="col-span-2 text-center text-gray-600">
                                    <div class="font-medium">3 days ago</div>
                                    <div class="text-sm text-gray-400">07:52 PM</div>
                                </div>
                                <div class="col-span-2 text-center">
                                    <button onclick="dashboard.openLeadDetails('3')" class="btn-primary text-sm px-4 py-2">
                                        Analysis
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Empty State (hidden by default) -->
                <div id="empty-state" class="hidden text-center py-16">
                    <div class="inline-flex items-center justify-center w-24 h-24 mx-auto mb-6 bg-gray-100 rounded-2xl">
                        <svg class="w-12 h-12 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-2xl font-bold text-gray-900 mb-4">No leads yet</h3>
                    <p class="text-gray-600 mb-8 max-w-md mx-auto">
                        Start researching leads to see them appear here. Use the Research Lead button to analyze Instagram profiles.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center">
                        <button onclick="dashboard.showAnalysisModal()" class="btn-primary">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            Research Your First Lead
                        </button>
                        <button onclick="dashboard.showBulkUpload()" class="btn-secondary">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Bulk Upload Leads
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Loading State Overlay -->
            <div id="loading-overlay" class="hidden fixed inset-0 bg-white bg-opacity-90 z-50 flex items-center justify-center">
                <div class="text-center">
                    <div class="inline-block animate-spin rounded-full h-12 w-12 border-4 border-blue-500 border-t-transparent mb-4"></div>
                    <h2 class="text-xl font-semibold text-gray-900 mb-2">Loading Dashboard</h2>
                    <p class="text-gray-600">Please wait while we load your data...</p>
                </div>
            </div>
        </main>
        
        <!-- Bulk Actions Toolbar -->
        <div id="bulk-actions-toolbar" class="fixed bottom-6 left-1/2 transform -translate-x-1/2 z-40 bg-white border border-gray-200 rounded-2xl shadow-xl p-4 transition-all duration-300 scale-95 opacity-0" style="transform: translateX(-50%) scale(0.95);">
            <div class="flex items-center space-x-6">
                <div class="flex items-center space-x-3">
                    <div class="bg-blue-500 text-white px-3 py-1 rounded-full text-sm font-semibold">
                        <span id="selected-count">0</span>
                    </div>
                    <div class="text-gray-700 font-medium">leads selected</div>
                </div>
                
                <div class="flex items-center space-x-3">
                    <button onclick="dashboard.bulkExport()" class="btn-secondary text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export Selected
                    </button>
                    
                    <button onclick="dashboard.bulkDelete()" class="btn-secondary text-sm" style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.2); color: #dc2626;">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        Delete Selected
                    </button>
                    
                    <button onclick="dashboard.clearSelection()" class="btn-secondary text-sm">
                        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Clear
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Modal Container -->
    <div id="modal-container"></div>
    
    <!-- JavaScript -->
    <script>
        // =============================================================================
        // MOBILE MENU HANDLER
        // =============================================================================
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const sidebar = document.getElementById('sidebar-container');
            const overlay = document.getElementById('sidebar-overlay');
            
            if (mobileMenuBtn && overlay) {
                mobileMenuBtn.addEventListener('click', () => {
                    const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                    if (sidebarElement) {
                        const isOpen = sidebarElement.classList.contains('mobile-open');
                        
                        if (isOpen) {
                            sidebarElement.classList.remove('mobile-open');
                            overlay.classList.add('hidden');
                            document.body.style.overflow = '';
                        } else {
                            sidebarElement.classList.add('mobile-open');
                            overlay.classList.remove('hidden');
                            document.body.style.overflow = 'hidden';
                        }
                    }
                });
                
                overlay.addEventListener('click', () => {
                    const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                    if (sidebarElement) {
                        sidebarElement.classList.remove('mobile-open');
                        overlay.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
                
                window.addEventListener('resize', () => {
                    if (window.innerWidth >= 1024) {
                        const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                        if (sidebarElement) {
                            sidebarElement.classList.remove('mobile-open');
                            overlay.classList.add('hidden');
                            document.body.style.overflow = '';
                        }
                    }
                });
            }
        });

        // =============================================================================
        // SELECTION MANAGEMENT
        // =============================================================================
        window.dashboard = window.dashboard || {};
        window.dashboard.selectedLeads = new Set();
        
        window.dashboard.updateBulkToolbar = function() {
            const toolbar = document.getElementById('bulk-actions-toolbar');
            const countElement = document.getElementById('selected-count');
            const count = window.dashboard.selectedLeads.size;
            
            if (count > 0) {
                toolbar.style.transform = 'translateX(-50%) scale(1)';
                toolbar.style.opacity = '1';
                if (countElement) countElement.textContent = count;
            } else {
                toolbar.style.transform = 'translateX(-50%) scale(0.95)';
                toolbar.style.opacity = '0';
            }
        };
        
        window.dashboard.clearSelection = function() {
            window.dashboard.selectedLeads.clear();
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            window.dashboard.updateBulkToolbar();
        };

        // Checkbox event listeners
        document.addEventListener('change', (e) => {
            if (e.target.type === 'checkbox') {
                const row = e.target.closest('.table-row');
                if (row) {
                    const leadId = Math.random().toString(36).substr(2, 9); // Generate ID
                    
                    if (e.target.checked) {
                        window.dashboard.selectedLeads.add(leadId);
                    } else {
                        window.dashboard.selectedLeads.delete(leadId);
                    }
                    
                    window.dashboard.updateBulkToolbar();
                }
            }
        });

        // =============================================================================
        // DASHBOARD FUNCTIONS
        // =============================================================================
        window.dashboard.showAnalysisModal = window.dashboard.showAnalysisModal || function(username = '') {
            console.log('🔍 Opening analysis modal for:', username);
            alert('Analysis modal will open here. Username: ' + (username || 'New research'));
        };
        
        window.dashboard.showBulkUpload = window.dashboard.showBulkUpload || function() {
            console.log('📁 Opening bulk upload modal');
            alert('Bulk upload modal will open here');
        };
        
        window.dashboard.exportData = window.dashboard.exportData || function() {
            console.log('📊 Exporting data');
            alert('Export functionality will be implemented here');
        };
        
        window.dashboard.openAnalytics = window.dashboard.openAnalytics || function() {
            console.log('📈 Opening analytics');
            window.location.href = '/analytics';
        };
        
        window.dashboard.openLeadDetails = window.dashboard.openLeadDetails || function(leadId) {
            console.log('👤 Opening lead details for:', leadId);
            alert('Lead details modal will open for lead: ' + leadId);
        };
        
        window.dashboard.refreshData = window.dashboard.refreshData || function() {
            console.log('🔄 Refreshing data');
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                }, 1500);
            }
        };
        
        window.dashboard.bulkExport = window.dashboard.bulkExport || function() {
            const count = window.dashboard.selectedLeads.size;
            console.log('📤 Bulk exporting', count, 'leads');
            alert(`Exporting ${count} selected leads`);
        };
        
        window.dashboard.bulkDelete = window.dashboard.bulkDelete || function() {
            const count = window.dashboard.selectedLeads.size;
            if (confirm(`Are you sure you want to delete ${count} selected leads?`)) {
                console.log('🗑️ Bulk deleting', count, 'leads');
                window.dashboard.clearSelection();
                alert(`Deleted ${count} leads`);
            }
        };

        // =============================================================================
        // ERROR PREVENTION
        // =============================================================================
        window.addEventListener('error', (event) => {
            if (event.error?.message?.includes('Cannot read properties')) {
                event.preventDefault();
                console.warn('🛡️ Prevented property access error');
            }
        });

        console.log('✅ White Theme Dashboard loaded and ready');
    </script>
</body>
</html>
