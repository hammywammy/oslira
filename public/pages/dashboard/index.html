<!DOCTYPE html>
<html lang="en">
<head>
    <script src="/core/script-loader.js"></script>
    <link rel="icon" type="image/png" href="/assets/images/oslira-logo.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Oslira</title>
    
    <!-- Load Enhanced Tailwind CSS with cache busting -->
    <link rel="stylesheet" href="/assets/css/tailwind.css?v=3">
    
    <!-- Load existing alert system -->
    <script src="/utils/alert-system.js"></script>
</head>
<body class="dashboard-main">
    <!-- Skip Navigation -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
    
    <!-- Mobile menu button -->
    <button id="mobile-menu-btn" class="fixed top-4 left-4 z-50 lg:hidden bg-white/10 hover:bg-white/20 backdrop-blur-sm rounded-lg p-2 text-white transition-all duration-200">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
        </svg>
    </button>

    <!-- Sidebar overlay for mobile -->
    <div id="sidebar-overlay" class="sidebar-overlay hidden"></div>
    
    <!-- Dashboard Layout -->
    <div class="min-h-screen">
        <!-- Sidebar Container -->
        <aside id="sidebar-container"></aside>
        
        <!-- Main Content Area -->
        <main role="main" id="main-content" class="dashboard-content">
            
            <!-- Hero Quick Actions Section -->
            <section class="hero-actions-section">
                <div class="hero-glass-container">
                    <div class="text-center mb-10">
                        <h1 class="text-4xl font-black text-white mb-4 tracking-tight">
                            <span class="bg-gradient-to-r from-orange-400 to-pink-400 bg-clip-text text-transparent">
                                Dashboard
                            </span>
                        </h1>
                        <p class="text-white/70 text-lg font-medium">Manage your leads with AI-powered insights</p>
                        
                        <!-- CTA Buttons -->
                        <div class="flex items-center justify-center space-x-4 mt-6">
                            <button onclick="dashboard.showAnalysisModal()" class="premium-action-btn">
                                <svg class="w-5 h-5 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                                Research Lead
                            </button>
                            <button onclick="dashboard.showBulkUpload()" class="btn-secondary">
                                <svg class="w-5 h-5 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                                Bulk Upload
                            </button>
                        </div>
                    </div>
                    
                    <!-- Quick Actions Grid -->
                    <div class="actions-grid">
                        <!-- Research Lead Card -->
                        <div class="premium-action-card group" onclick="dashboard.showAnalysisModal()">
                            <div class="action-icon-wrapper">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                                </svg>
                            </div>
                            <h3 class="action-title">Research Lead</h3>
                            <p class="action-subtitle">Instant AI analysis of Instagram profiles with detailed insights</p>
                        </div>
                        
                        <!-- Bulk Upload Card -->
                        <div class="premium-action-card group" onclick="dashboard.showBulkUpload()">
                            <div class="action-icon-wrapper">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                                </svg>
                            </div>
                            <h3 class="action-title">Bulk Upload</h3>
                            <p class="action-subtitle">Upload hundreds of leads instantly for mass analysis</p>
                        </div>
                        
                        <!-- Export Data Card -->
                        <div class="premium-action-card group" onclick="dashboard.exportData()">
                            <div class="action-icon-wrapper">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                                </svg>
                            </div>
                            <h3 class="action-title">Export Data</h3>
                            <p class="action-subtitle">Download leads in CSV, Excel, or JSON formats</p>
                        </div>
                        
                        <!-- Analytics Card -->
                        <div class="premium-action-card group" onclick="dashboard.openAnalytics()">
                            <div class="action-icon-wrapper">
                                <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                </svg>
                            </div>
                            <h3 class="action-title">Analytics</h3>
                            <p class="action-subtitle">Deep insights and performance metrics dashboard</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Premium Stats Section -->
            <section class="dashboard-grid">
                <!-- Total Leads Stat -->
                <div class="premium-stat-card group">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"/>
                            </svg>
                        </div>
                        <div class="stat-trend">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            +32%
                        </div>
                    </div>
                    <div class="stat-value" id="total-leads">4</div>
                    <div class="stat-label">Total Leads</div>
                    <div class="text-white/50 text-sm mt-2">this week</div>
                </div>
                
                <!-- Analyzed Stat -->
                <div class="premium-stat-card group">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="stat-trend">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            +18%
                        </div>
                    </div>
                    <div class="stat-value" id="analyzed-leads">3</div>
                    <div class="stat-label">Analyzed</div>
                    <div class="text-white/50 text-sm mt-2">this week</div>
                </div>
                
                <!-- Pending Stat -->
                <div class="premium-stat-card group">
                    <div class="stat-header">
                        <div class="stat-icon">
                            <svg class="w-7 h-7 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                        </div>
                        <div class="stat-trend" style="background: rgba(245, 158, 11, 0.15); color: #fbbf24; border-color: rgba(245, 158, 11, 0.2);">
                            <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24" style="transform: rotate(180deg);">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 11l5-5m0 0l5 5m-5-5v12"/>
                            </svg>
                            -12%
                        </div>
                    </div>
                    <div class="stat-value" id="pending-leads">0</div>
                    <div class="stat-label">Pending</div>
                    <div class="text-white/50 text-sm mt-2">processing now</div>
                </div>
            </section>

            <!-- Premium Lead Management Section -->
            <section class="lead-management-container">
                <div class="section-header">
                    <div>
                        <h2 class="section-title">Lead Management</h2>
                        <p class="section-subtitle">Track and analyze your lead pipeline with advanced AI insights</p>
                    </div>
                    <div class="filter-controls">
                        <select id="platform-filter" class="premium-select" onchange="dashboard.applyFilters()">
                            <option value="">All Platforms</option>
                            <option value="instagram">Instagram</option>
                            <option value="linkedin">LinkedIn</option>
                            <option value="tiktok">TikTok</option>
                        </select>
                        
                        <select id="type-filter" class="premium-select" onchange="dashboard.applyFilters()">
                            <option value="">All Analysis Types</option>
                            <option value="strong">Strong Analysis</option>
                            <option value="moderate">Moderate Analysis</option>
                            <option value="light">Light Analysis</option>
                        </select>
                        
                        <button onclick="dashboard.refreshData()" class="premium-action-btn">
                            <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                            </svg>
                            Refresh
                        </button>
                    </div>
                </div>
                
                <!-- Premium Table -->
                <div class="leads-table-container">
                    <table class="leads-table">
                        <thead>
                            <tr>
                                <th class="table-header-cell" style="width: 50px;">
                                    <input type="checkbox" id="select-all" class="premium-checkbox" onchange="dashboard.toggleSelectAll()">
                                </th>
                                <th class="table-header-cell">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                                        </svg>
                                        <span class="text-white/80">Profile</span>
                                    </div>
                                </th>
                                <th class="table-header-cell">
                                    <div class="flex items-center justify-center space-x-2">
                                        <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"/>
                                        </svg>
                                        <span class="text-white/80">Platform</span>
                                    </div>
                                </th>
                                <th class="table-header-cell">
                                    <div class="flex items-center space-x-2">
                                        <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                        </svg>
                                        <span class="text-white/80">Analysis</span>
                                    </div>
                                </th>
                                <th class="table-header-cell">
                                    <div class="flex items-center justify-center space-x-2">
                                        <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                        </svg>
                                        <span class="text-white/80">Date</span>
                                    </div>
                                </th>
                                <th class="table-header-cell">
                                    <div class="flex items-center justify-center space-x-2">
                                        <svg class="w-5 h-5 text-white/60" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"/>
                                        </svg>
                                        <span class="text-white/80">Actions</span>
                                    </div>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="leads-table-body">
                            <!-- Sample Lead Row 1 -->
                            <tr class="lead-row" data-lead-id="1">
                                <td class="px-8 py-6">
                                    <input type="checkbox" class="lead-checkbox premium-checkbox" data-lead-id="1">
                                </td>
                                <td class="px-8 py-6">
                                    <div class="flex items-center space-x-4">
                                        <img src="/assets/images/default-avatar.png" alt="@poky" class="premium-avatar">
                                        <div>
                                            <div class="text-white font-semibold">@poky</div>
                                            <div class="text-white/60 text-sm">Social Media Influencer</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="inline-flex items-center space-x-2 px-3 py-1 rounded-lg bg-gradient-to-r from-pink-500/20 to-rose-500/20 border border-pink-500/30">
                                        <svg class="w-4 h-4 text-pink-400" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.219-5.160 1.219-5.160s-.219-.438-.219-1.085c0-1.016.589-1.775 1.324-1.775.624 0 .926.468.926 1.029 0 .627-.399 1.565-.6 2.434-.171.72.360 1.308 1.070 1.308 1.285 0 2.273-1.356 2.273-3.318 0-1.735-1.247-2.948-3.028-2.948-2.064 0-3.279 1.549-3.279 3.156 0 .624.24 1.294.540 1.659.059.072.068.135.050.209-.055.227-.177.721-.201.822-.031.131-.101.159-.233.096-1.167-.544-1.896-2.251-1.896-3.618 0-2.287 1.662-4.388 4.790-4.388 2.513 0 4.467 1.791 4.467 4.184 0 2.498-1.574 4.507-3.760 4.507-.734 0-1.427-.382-1.663-.837l-.452 1.724c-.164.630-.605 1.420-.901 1.903.678.209 1.402.322 2.156.322 6.624 0 11.990-5.367 11.990-11.988C24.007 5.367 18.641.001.017 0z"/>
                                        </svg>
                                        <span class="text-pink-400 font-medium text-sm">LinkedIn</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6">
                                    <div class="analysis-badge strong">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>Strong Analysis</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="text-white">2 days ago</div>
                                    <div class="text-white/60 text-sm">12:45 AM</div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <button onclick="dashboard.openLeadDetails('1')" class="premium-action-btn text-sm px-4 py-2">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                        </svg>
                                        Analysis
                                    </button>
                                </td>
                            </tr>
                            
                            <!-- Sample Lead Row 2 -->
                            <tr class="lead-row" data-lead-id="2">
                                <td class="px-8 py-6">
                                    <input type="checkbox" class="lead-checkbox premium-checkbox" data-lead-id="2">
                                </td>
                                <td class="px-8 py-6">
                                    <div class="flex items-center space-x-4">
                                        <img src="/assets/images/default-avatar.png" alt="@bobby" class="premium-avatar">
                                        <div>
                                            <div class="text-white font-semibold">@bobby</div>
                                            <div class="text-white/60 text-sm">Content Creator</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="inline-flex items-center space-x-2 px-3 py-1 rounded-lg bg-gradient-to-r from-pink-500/20 to-rose-500/20 border border-pink-500/30">
                                        <svg class="w-4 h-4 text-pink-400" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M21.543 7.104c.015-.211.015-.423.015-.636 0-6.627-5.373-12-12-12S-2.457.841-2.457 7.468c0 .213 0 .425.015.636C-2.457 8.158-2.457 24 9.543 24s12-15.842 12-16.896zM12 2.25c3.726 0 6.75 3.024 6.75 6.75 0 .211 0 .423-.015.636-4.269.015-8.523-.015-13.47 0C5.265 8.851 5.265 8.211 5.265 7.468c0-3.726 3.024-6.75 6.735-6.75zM12 21.75c-6.343 0-10.5-11.143-10.5-12.836C6.75 8.851 17.25 8.851 22.5 8.914 22.5 10.607 18.343 21.75 12 21.75z"/>
                                        </svg>
                                        <span class="text-pink-400 font-medium text-sm">TikTok</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6">
                                    <div class="analysis-badge low" style="background: linear-gradient(135deg, rgba(245, 158, 11, 0.2) 0%, rgba(251, 191, 36, 0.2) 100%); color: #fbbf24; border-color: rgba(245, 158, 11, 0.3);">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                                        </svg>
                                        <span>Low Analysis</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="text-white">2 days ago</div>
                                    <div class="text-white/60 text-sm">12:44 AM</div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <button onclick="dashboard.openLeadDetails('2')" class="premium-action-btn text-sm px-4 py-2">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                            </svg>
                                        Analysis
                                    </button>
                                </td>
                            </tr>
                            
                            <!-- Sample Lead Row 3 -->
                            <tr class="lead-row" data-lead-id="3">
                                <td class="px-8 py-6">
                                    <input type="checkbox" class="lead-checkbox premium-checkbox" data-lead-id="3">
                                </td>
                                <td class="px-8 py-6">
                                    <div class="flex items-center space-x-4">
                                        <img src="/assets/images/default-avatar.png" alt="@james" class="premium-avatar">
                                        <div>
                                            <div class="text-white font-semibold">@james</div>
                                            <div class="text-white/60 text-sm">Digital Entrepreneur</div>
                                        </div>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="inline-flex items-center space-x-2 px-3 py-1 rounded-lg bg-gradient-to-r from-purple-500/20 to-pink-500/20 border border-purple-500/30">
                                        <svg class="w-4 h-4 text-purple-400" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                                        </svg>
                                        <span class="text-purple-400 font-medium text-sm">Instagram</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6">
                                    <div class="analysis-badge moderate" style="background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(147, 197, 253, 0.2) 100%); color: #93c5fd; border-color: rgba(59, 130, 246, 0.3);">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                                        </svg>
                                        <span>Deep Analysis</span>
                                    </div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <div class="text-white">3 days ago</div>
                                    <div class="text-white/60 text-sm">07:52 PM</div>
                                </td>
                                <td class="px-8 py-6 text-center">
                                    <button onclick="dashboard.openLeadDetails('3')" class="premium-action-btn text-sm px-4 py-2">
                                        <svg class="w-4 h-4 mr-1 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                                        </svg>
                                        Analysis
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-- Empty State (hidden by default) -->
                <div id="empty-state" class="hidden text-center py-20">
                    <div class="inline-flex items-center justify-center w-32 h-32 mx-auto mb-8 rounded-3xl bg-gradient-to-r from-orange-500/20 to-pink-500/20 border border-orange-500/30">
                        <svg class="w-16 h-16 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                    </div>
                    <h3 class="text-3xl font-black text-white mb-6">No leads yet</h3>
                    <p class="text-white/60 text-lg mb-10 leading-relaxed max-w-md mx-auto">
                        Start researching leads to see them appear here. Use the Research Lead button to analyze Instagram profiles.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-6 justify-center">
                        <button onclick="dashboard.showAnalysisModal()" class="premium-action-btn">
                            <svg class="w-5 h-5 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
                            </svg>
                            Research Your First Lead
                        </button>
                        <button onclick="dashboard.showBulkUpload()" class="btn-secondary">
                            <svg class="w-5 h-5 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
                            </svg>
                            Bulk Upload Leads
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- Loading State Overlay -->
            <div id="loading-overlay" class="loading-overlay hidden">
                <div class="loading-content">
                    <div class="premium-spinner"></div>
                    <h2 class="loading-title">Loading Dashboard</h2>
                    <p class="loading-subtitle">Please wait while we load your data...</p>
                </div>
            </div>
        </main>
        
        <!-- Bulk Actions Toolbar (appears when items selected) -->
        <div id="bulk-actions-toolbar" class="bulk-actions-toolbar">
            <div class="bulk-toolbar-content">
                <div class="bulk-counter">
                    <div class="bulk-counter-badge">
                        <span id="selected-count">0</span>
                    </div>
                    <div class="bulk-counter-text">leads selected</div>
                </div>
                
                <div class="bulk-actions">
                    <button onclick="dashboard.bulkExport()" class="btn-secondary text-sm px-4 py-2">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                        </svg>
                        Export Selected
                    </button>
                    
                    <button onclick="dashboard.bulkDelete()" class="btn-secondary text-sm px-4 py-2" style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.3); color: #fca5a5;">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                        </svg>
                        Delete Selected
                    </button>
                    
                    <button onclick="dashboard.clearSelection()" class="btn-secondary text-sm px-4 py-2">
                        <svg class="w-4 h-4 mr-2 inline" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
                        </svg>
                        Clear
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Analysis Modal Container -->
    <div id="modal-container"></div>
    
    <!-- Global Error Handler and Mobile Menu Script -->
    <script>
        // =============================================================================
        // MOBILE MENU HANDLER
        // =============================================================================
        document.addEventListener('DOMContentLoaded', () => {
            const mobileMenuBtn = document.getElementById('mobile-menu-btn');
            const sidebar = document.getElementById('sidebar-container');
            const overlay = document.getElementById('sidebar-overlay');
            
            if (mobileMenuBtn && overlay) {
                // Toggle mobile menu
                mobileMenuBtn.addEventListener('click', () => {
                    const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                    if (sidebarElement) {
                        const isOpen = sidebarElement.classList.contains('mobile-open');
                        
                        if (isOpen) {
                            // Close menu
                            sidebarElement.classList.remove('mobile-open');
                            overlay.classList.add('hidden');
                            document.body.style.overflow = '';
                        } else {
                            // Open menu
                            sidebarElement.classList.add('mobile-open');
                            overlay.classList.remove('hidden');
                            document.body.style.overflow = 'hidden';
                        }
                    }
                });
                
                // Close menu when overlay clicked
                overlay.addEventListener('click', () => {
                    const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                    if (sidebarElement) {
                        sidebarElement.classList.remove('mobile-open');
                        overlay.classList.add('hidden');
                        document.body.style.overflow = '';
                    }
                });
                
                // Close menu when window resized to desktop
                window.addEventListener('resize', () => {
                    if (window.innerWidth >= 1024) {
                        const sidebarElement = sidebar?.querySelector('.dashboard-sidebar');
                        if (sidebarElement) {
                            sidebarElement.classList.remove('mobile-open');
                            overlay.classList.add('hidden');
                            document.body.style.overflow = '';
                        }
                    }
                });
            }
        });

        // =============================================================================
        // GLOBAL ERROR PREVENTION
        // =============================================================================
        window.addEventListener('error', (event) => {
            if (event.error?.message?.includes('Cannot read properties')) {
                event.preventDefault();
                console.warn('🛡️ Prevented property access error');
                
                // Show fallback instead of crash
                const container = document.querySelector('.dashboard-content');
                if (container && !container.querySelector('.error-fallback')) {
                    const fallback = document.createElement('div');
                    fallback.className = 'error-fallback error-state';
                    fallback.innerHTML = `
                        <div class="error-content">
                            <h2>Dashboard Loading</h2>
                            <p>Please wait while we load your dashboard...</p>
                            <div class="error-actions">
                                <button onclick="window.location.reload()" class="btn btn-primary">
                                    Refresh Page
                                </button>
                            </div>
                        </div>
                    `;
                    container.appendChild(fallback);
                }
            }
        });

        // =============================================================================
        // SELECTION MANAGEMENT
        // =============================================================================
        window.dashboard = window.dashboard || {};
        
        // Initialize selection management
        window.dashboard.selectedLeads = new Set();
        
        window.dashboard.toggleSelectAll = function() {
            const selectAllCheckbox = document.getElementById('select-all');
            const leadCheckboxes = document.querySelectorAll('.lead-checkbox');
            const isSelectingAll = selectAllCheckbox.checked;
            
            leadCheckboxes.forEach(checkbox => {
                checkbox.checked = isSelectingAll;
                const leadId = checkbox.dataset.leadId;
                
                if (isSelectingAll) {
                    window.dashboard.selectedLeads.add(leadId);
                } else {
                    window.dashboard.selectedLeads.delete(leadId);
                }
            });
            
            window.dashboard.updateBulkToolbar();
        };
        
        window.dashboard.updateBulkToolbar = function() {
            const toolbar = document.getElementById('bulk-actions-toolbar');
            const countElement = document.getElementById('selected-count');
            const count = window.dashboard.selectedLeads.size;
            
            if (count > 0) {
                toolbar?.classList.add('show');
                if (countElement) countElement.textContent = count;
            } else {
                toolbar?.classList.remove('show');
            }
        };
        
        window.dashboard.clearSelection = function() {
            window.dashboard.selectedLeads.clear();
            document.querySelectorAll('.lead-checkbox, #select-all').forEach(cb => cb.checked = false);
            window.dashboard.updateBulkToolbar();
        };

        // Add checkbox event listeners
        document.addEventListener('change', (e) => {
            if (e.target.classList.contains('lead-checkbox')) {
                const leadId = e.target.dataset.leadId;
                
                if (e.target.checked) {
                    window.dashboard.selectedLeads.add(leadId);
                } else {
                    window.dashboard.selectedLeads.delete(leadId);
                    // Uncheck select-all if individual item unchecked
                    const selectAllCheckbox = document.getElementById('select-all');
                    if (selectAllCheckbox) selectAllCheckbox.checked = false;
                }
                
                window.dashboard.updateBulkToolbar();
            }
        });

        // =============================================================================
        // PLACEHOLDER FUNCTIONS FOR MISSING DASHBOARD METHODS
        // =============================================================================
        window.dashboard.showAnalysisModal = window.dashboard.showAnalysisModal || function(username = '') {
            console.log('🔍 Opening analysis modal for:', username);
            // TODO: Implement modal opening logic
            alert('Analysis modal will open here. Username: ' + (username || 'New research'));
        };
        
        window.dashboard.showBulkUpload = window.dashboard.showBulkUpload || function() {
            console.log('📁 Opening bulk upload modal');
            alert('Bulk upload modal will open here');
        };
        
        window.dashboard.exportData = window.dashboard.exportData || function() {
            console.log('📊 Exporting data');
            alert('Export functionality will be implemented here');
        };
        
        window.dashboard.openAnalytics = window.dashboard.openAnalytics || function() {
            console.log('📈 Opening analytics');
            window.location.href = '/analytics';
        };
        
        window.dashboard.openLeadDetails = window.dashboard.openLeadDetails || function(leadId) {
            console.log('👤 Opening lead details for:', leadId);
            alert('Lead details modal will open for lead: ' + leadId);
        };
        
        window.dashboard.applyFilters = window.dashboard.applyFilters || function() {
            console.log('🔍 Applying filters');
            // TODO: Implement filtering logic
        };
        
        window.dashboard.refreshData = window.dashboard.refreshData || function() {
            console.log('🔄 Refreshing data');
            // Show loading state briefly
            const loadingOverlay = document.getElementById('loading-overlay');
            if (loadingOverlay) {
                loadingOverlay.classList.remove('hidden');
                setTimeout(() => {
                    loadingOverlay.classList.add('hidden');
                }, 1000);
            }
        };
        
        window.dashboard.bulkExport = window.dashboard.bulkExport || function() {
            const count = window.dashboard.selectedLeads.size;
            console.log('📤 Bulk exporting', count, 'leads');
            alert(`Exporting ${count} selected leads`);
        };
        
        window.dashboard.bulkDelete = window.dashboard.bulkDelete || function() {
            const count = window.dashboard.selectedLeads.size;
            if (confirm(`Are you sure you want to delete ${count} selected leads?`)) {
                console.log('🗑️ Bulk deleting', count, 'leads');
                window.dashboard.clearSelection();
                alert(`Deleted ${count} leads`);
            }
        };

        // =============================================================================
        // INITIALIZATION
        // =============================================================================
        console.log('✅ Dashboard HTML loaded and ready');
        console.log('🔧 Mobile menu handlers initialized');
        console.log('🛡️ Global error handlers active');
        console.log('📊 Selection management ready');
    </script>
</body>
</html>
