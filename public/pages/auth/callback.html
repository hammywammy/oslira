<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Authenticating...</title>
</head>
<body>
    <div style="display: flex; justify-content: center; align-items: center; height: 100vh;">
        <p>Processing authentication...</p>
    </div>
    
    <!-- Keep your existing script-loader setup -->
<script src="/core/script-loader.js"></script>
<script>
document.addEventListener('DOMContentLoaded', async () => {
    if (window.OsliraScriptLoader) {
        const loader = new window.OsliraScriptLoader();
        await loader.loadAll();
    }
});
</script>
    <script>
    (async () => {
        try {
            await window.SimpleAuth.initialize();
            
            // OAuth callback handling is automatic with Supabase
            const { data: { session } } = await window.SimpleAuth.supabase.auth.getSession();
            
            if (session) {
                window.location.href = '/onboarding';
            } else {
                window.location.href = '/auth?error=authentication-failed';
            }
        } catch (error) {
            console.error('Callback processing failed:', error);
            window.location.href = '/auth?error=callback-failed';
        }
    })();
    </script>
</body>
</html>
