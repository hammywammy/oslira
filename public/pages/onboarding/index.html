<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Complete Your Setup - Oslira</title>
    <link rel="stylesheet" href="/pages/onboarding/onboarding.css">
    <style>
        /* Additional styles for character limits and phone input */
        .phone-input-group {
            display: flex;
            gap: 0.5rem;
        }
        
        .country-select {
            width: 80px;
            padding: 0.75rem 0.5rem;
            border: 2px solid var(--border-light, #e5e7eb);
            border-radius: var(--radius-md, 0.5rem);
            font-size: 0.875rem;
            background: white;
        }
        
        .phone-input {
            flex: 1;
        }
        
        .checkbox-group {
            margin-top: 1rem;
            padding: 1rem;
            background: var(--bg-secondary, #f9fafb);
            border-radius: var(--radius-md, 0.5rem);
            border: 1px solid var(--border-light, #e5e7eb);
        }
        
        .checkbox-label {
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
            cursor: pointer;
        }
        
        .checkbox-label input[type="checkbox"] {
            margin: 0;
            accent-color: var(--primary-blue, #3b82f6);
        }
        
        .label-text small {
            color: var(--text-secondary, #6b7280);
            font-style: italic;
            line-height: 1.4;
        }
        
        .helper-text.with-limit {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .helper-text .limit-hint {
            font-size: 0.8rem;
            color: var(--text-secondary, #6b7280);
            font-style: italic;
        }
    </style>
</head>
<body>
    <!-- Loading State (shown initially) -->
    <div id="loading-state" class="loading-state">
        <div class="spinner"></div>
        <p>Setting up your account...</p>
    </div>

    <!-- Error State (hidden initially) -->
    <div id="error-state" class="error-state hidden">
        <h3>Setup Failed</h3>
        <p id="error-message">Something went wrong. Please try again.</p>
        <button class="btn btn-primary" onclick="window.location.reload()">Try Again</button>
    </div>

    <!-- Main Onboarding Form (hidden initially) -->
    <div id="onboarding-form" class="onboarding-container hidden">
        <!-- Header -->
        <div class="header">
            <div class="logo">Oslira</div>
            <div class="subtitle">Complete your business setup</div>
        </div>

        <!-- Progress Bar -->
        <div class="progress-section">
            <div class="progress-text">
                <span>Step <span id="progress-step">1</span> of 9</span>
                <span id="progress-percent">11%</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
        </div>

        <!-- Onboarding Steps -->
        <div class="steps-container">
            
            <!-- Step 1: Primary Objective -->
            <div class="step" id="step-1">
                <div class="step-title">What's your primary goal?</div>
                <div class="step-description">Help us understand what you want to achieve.</div>
                
                <div class="form-group">
                    <label class="form-label">Choose your main objective *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="obj-leads" name="primary-objective" value="generate-leads">
                            <label for="obj-leads" class="radio-label">
                                <span class="radio-icon">🎯</span>
                                <div class="radio-text">
                                    <strong>Generate More Leads</strong>
                                    <small>Find and connect with potential customers</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="obj-sales" name="primary-objective" value="increase-sales">
                            <label for="obj-sales" class="radio-label">
                                <span class="radio-icon">💰</span>
                                <div class="radio-text">
                                    <strong>Increase Sales</strong>
                                    <small>Convert more prospects into paying customers</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="obj-brand" name="primary-objective" value="build-brand">
                            <label for="obj-brand" class="radio-label">
                                <span class="radio-icon">🏆</span>
                                <div class="radio-text">
                                    <strong>Build My Brand</strong>
                                    <small>Increase awareness and recognition</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="obj-scale" name="primary-objective" value="scale-business">
                            <label for="obj-scale" class="radio-label">
                                <span class="radio-icon">📈</span>
                                <div class="radio-text">
                                    <strong>Scale My Business</strong>
                                    <small>Grow revenue and reach</small>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-error" id="primary-objective-error"></div>
                </div>
                
                <div class="button-group">
                    <div></div>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>
            
            <!-- Step 2: Business Name -->
            <div class="step hidden" id="step-2">
                <div class="step-title">What's your business name?</div>
                <div class="step-description">Let's start with the basics.</div>
                
                <div class="form-group">
                    <label class="form-label" for="business-name">Business Name *</label>
                    <div class="helper-text with-limit">
                        <span>The name of your business or brand</span>
                        <span class="limit-hint">Max 100 chars</span>
                    </div>
                    <input type="text" id="business-name" class="form-input" 
                           placeholder="Enter your business name (e.g. Smith Marketing Agency)"
                           maxlength="100">
                    <!-- Character counter will be inserted here automatically -->
                    <div class="form-error" id="business-name-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 3: Business Niche -->
            <div class="step hidden" id="step-3">
                <div class="step-title">What's your business niche?</div>
                <div class="step-description">Help us understand your industry.</div>
                
                <div class="form-group">
                    <label class="form-label" for="business-niche">Business Niche *</label>
                    <div class="helper-text">
                        <span>This helps us find prospects in your industry</span>
                    </div>
                    <select id="business-niche" class="form-select">
                        <option value="">Select your niche</option>
                        <option value="fitness">💪 Fitness & Health</option>
                        <option value="beauty">💄 Beauty & Skincare</option>
                        <option value="fashion">👗 Fashion & Lifestyle</option>
                        <option value="food">🍽️ Food & Restaurants</option>
                        <option value="travel">✈️ Travel & Tourism</option>
                        <option value="technology">💻 Technology & Apps</option>
                        <option value="business">📊 Business Services</option>
                        <option value="education">📚 Education & Courses</option>
                        <option value="real-estate">🏠 Real Estate</option>
                        <option value="finance">💰 Finance & Investing</option>
                        <option value="marketing">📢 Marketing & Advertising</option>
                        <option value="coaching">🎯 Coaching & Consulting</option>
                        <option value="ecommerce">🛒 E-commerce & Retail</option>
                        <option value="other">🔧 Other</option>
                    </select>
                    <div class="form-error" id="business-niche-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 4: Target Audience -->
            <div class="step hidden" id="step-4">
                <div class="step-title">Who is your target audience?</div>
                <div class="step-description">Describe your ideal customer in detail.</div>
                
                <div class="form-group">
                    <label class="form-label" for="target-audience">Target Audience *</label>
                    <div class="helper-text with-limit">
                        <span>Be specific - this helps our AI find the right prospects</span>
                        <span class="limit-hint">20-500 chars</span>
                    </div>
                    <textarea id="target-audience" class="form-textarea" rows="4"
                              placeholder="Example: Small business owners aged 30-50 who struggle with social media marketing and have 10-50 employees. They're tech-savvy but don't have time for content creation."
                              maxlength="500"></textarea>
                    <!-- Character counter will be inserted here automatically -->
                    <div class="form-error" id="target-audience-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 5: Value Proposition -->
            <div class="step hidden" id="step-5">
                <div class="step-title">What makes you unique?</div>
                <div class="step-description">Your unique value in 1-2 sentences.</div>
                
                <div class="form-group">
                    <label class="form-label" for="value-proposition">Your Value Proposition *</label>
                    <div class="helper-text with-limit">
                        <span>What unique value do you provide? Keep it concise but compelling.</span>
                        <span class="limit-hint">20-300 chars</span>
                    </div>
                    <textarea id="value-proposition" class="form-textarea" rows="3"
                              placeholder="Example: We help small businesses get 10x more qualified leads through AI-powered social media targeting, without spending more on ads."
                              maxlength="300"></textarea>
                    <!-- Character counter will be inserted here automatically -->
                    <div class="form-error" id="value-proposition-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 6: Communication Tone -->
            <div class="step hidden" id="step-6">
                <div class="step-title">What's your communication style?</div>
                <div class="step-description">How do you prefer to communicate with prospects?</div>
                
                <div class="form-group">
                    <label class="form-label">Choose your preferred tone *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="tone-professional" name="communication-tone" value="professional">
                            <label for="tone-professional" class="radio-label">
                                <span class="radio-icon">👔</span>
                                <div class="radio-text">
                                    <strong>Professional</strong>
                                    <small>Formal, business-focused approach</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="tone-friendly" name="communication-tone" value="friendly">
                            <label for="tone-friendly" class="radio-label">
                                <span class="radio-icon">😊</span>
                                <div class="radio-text">
                                    <strong>Friendly</strong>
                                    <small>Casual, approachable, and warm</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="tone-direct" name="communication-tone" value="direct">
                            <label for="tone-direct" class="radio-label">
                                <span class="radio-icon">🎯</span>
                                <div class="radio-text">
                                    <strong>Direct</strong>
                                    <small>Straight to the point, no fluff</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="tone-consultative" name="communication-tone" value="consultative">
                            <label for="tone-consultative" class="radio-label">
                                <span class="radio-icon">🤝</span>
                                <div class="radio-text">
                                    <strong>Consultative</strong>
                                    <small>Advisory, helpful, solution-focused</small>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-error" id="communication-tone-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 7: Preferred CTA -->
            <div class="step hidden" id="step-7">
                <div class="step-title">What's your preferred call-to-action?</div>
                <div class="step-description">How do you want prospects to connect with you?</div>
                
                <div class="form-group">
                    <label class="form-label">Choose your main CTA *</label>
                    <div class="radio-group">
                        <div class="radio-option">
                            <input type="radio" id="cta-book-call" name="preferred-cta" value="book-call">
                            <label for="cta-book-call" class="radio-label">
                                <span class="radio-icon">📞</span>
                                <div class="radio-text">
                                    <strong>Book a Call</strong>
                                    <small>Schedule a consultation or discovery call</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="cta-visit-website" name="preferred-cta" value="visit-website">
                            <label for="cta-visit-website" class="radio-label">
                                <span class="radio-icon">🌐</span>
                                <div class="radio-text">
                                    <strong>Visit Website</strong>
                                    <small>Drive traffic to your website or landing page</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="cta-send-email" name="preferred-cta" value="send-email">
                            <label for="cta-send-email" class="radio-label">
                                <span class="radio-icon">✉️</span>
                                <div class="radio-text">
                                    <strong>Send Email</strong>
                                    <small>Get prospects to email you directly</small>
                                </div>
                            </label>
                        </div>
                        
                        <div class="radio-option">
                            <input type="radio" id="cta-send-dm" name="preferred-cta" value="send-dm">
                            <label for="cta-send-dm" class="radio-label">
                                <span class="radio-icon">💬</span>
                                <div class="radio-text">
                                    <strong>Send DM</strong>
                                    <small>Encourage direct messages on social media</small>
                                </div>
                            </label>
                        </div>
                    </div>
                    <div class="form-error" id="preferred-cta-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 8: Phone Number (Optional) -->
            <div class="step hidden" id="step-8">
                <div class="step-title">Stay connected (Optional)</div>
                <div class="step-description">Get VIP alerts when your lead analysis is ready!</div>
                
                <div class="form-group">
                    <label class="form-label" for="phone-number">Phone Number</label>
                    <div class="helper-text with-limit">
                        <span>For important account alerts and exclusive offers</span>
                        <span class="limit-hint">Optional • 10-20 chars</span>
                    </div>
                    <div class="phone-input-group">
                        <select id="country-code" class="country-select">
                            <option value="+1">🇺🇸 +1</option>
                            <option value="+44">🇬🇧 +44</option>
                            <option value="+1">🇨🇦 +1</option>
                            <option value="+61">🇦🇺 +61</option>
                            <option value="+33">🇫🇷 +33</option>
                            <option value="+49">🇩🇪 +49</option>
                        </select>
                        <input type="tel" id="phone-number" class="form-input phone-input" 
                               placeholder="(555) 123-4567"
                               maxlength="20">
                    </div>
                    <!-- Character counter will be inserted here automatically -->
                    <div class="form-error" id="phone-number-error"></div>
                    
                    <!-- SMS Opt-in (only show if phone entered) -->
                    <div class="checkbox-group" id="sms-opt-in-group" style="display: none;">
                        <label class="checkbox-label">
                            <input type="checkbox" id="opt-in-sms" checked>
                            <span class="label-text">
                                <strong>Yes, send me SMS updates!</strong><br>
                                <small>Get instant notifications for lead analysis results and exclusive promotions.</small>
                            </span>
                        </label>
                    </div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Continue</button>
                </div>
            </div>

            <!-- Step 9: Key Results (Optional) -->
            <div class="step hidden" id="step-9">
                <div class="step-title">What success looks like (Optional)</div>
                <div class="step-description">Help us understand your goals.</div>
                
                <div class="form-group">
                    <label class="form-label" for="key-results">Success Outcomes</label>
                    <div class="helper-text with-limit">
                        <span>What would make this lead generation effort a success?</span>
                        <span class="limit-hint">Optional • Max 800 chars</span>
                    </div>
                    <textarea id="key-results" class="form-textarea" rows="4"
                              placeholder="Example: I want to book 5-10 qualified sales calls per month from Instagram leads. Success would be closing 2-3 new clients worth $2,000+ each from social media outreach."
                              maxlength="800"></textarea>
                    <!-- Character counter will be inserted here automatically -->
                    <div class="form-error" id="key-results-error"></div>
                </div>
                
                <div class="button-group">
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Back</button>
                    <button type="button" class="btn btn-primary" onclick="submitOnboarding()">Complete Setup</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Script Loading -->
    <script src="/core/script-loader.js"></script>
    <script src="/pages/onboarding/onboarding.js"></script>
</body>
</html>
