<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lead Research Intelligence - Oslira</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/assets/images/oslira-logo.png">
    
    <!-- Environment Config -->
    <script src="/env-config.js"></script>
    
    <!-- Content Security Policy -->
    <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://js.sentry-cdn.com https://cdn.jsdelivr.net https://unpkg.com; style-src 'self' 'unsafe-inline'; img-src 'self' data: https: blob:; connect-src 'self' https: wss:; font-src 'self' data:; media-src 'self' blob: data:;">
    
    <!-- Styles -->
    <link rel="stylesheet" href="/leads/leads.css">
    
    <!-- Preload Critical Resources -->
    <link rel="preload" href="/core_utils/shared-code.js" as="script">
    <link rel="preload" href="/leads/leads.js" as="script">
    
    <!-- SEO Meta Tags -->
    <meta name="description" content="AI-powered lead research and analysis platform for strategic prospecting and outreach optimization.">
    <meta name="keywords" content="lead research, AI analysis, prospect intelligence, social media analysis, business development">
    <meta name="author" content="Oslira">
    
    <!-- Open Graph Meta Tags -->
    <meta property="og:title" content="Lead Research Intelligence - Oslira">
    <meta property="og:description" content="AI-powered lead research and analysis platform">
    <meta property="og:type" content="website">
    <meta property="og:image" content="./assets/oslira-logo.png">
    
    <!-- Schema.org Markup -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Oslira Lead Research Intelligence",
        "description": "AI-powered lead research and analysis platform",
        "applicationCategory": "BusinessApplication",
        "operatingSystem": "Web Browser"
    }
    </script>
</head>
<body class="dashboard">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <img src="/assets/images/oslira-logo.png" alt="Oslira Logo" class="logo-image">
            <div class="loading-spinner"></div>
            <p>Initializing Lead Research Intelligence...</p>
        </div>
    </div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
        <div class="logo">
            <img src="./assets/oslira-logo.png" alt="Oslira Logo" class="logo-image">
            <span>Oslira</span>
        </div>
        
        <nav class="menu" role="navigation" aria-label="Main navigation">
            <div class="menu-section">
                <h4>Main</h4>
                <a href="/dashboard.html" data-page="dashboard" aria-label="Dashboard">
                    <span class="icon" aria-hidden="true">üìä</span>
                    <span>Dashboard</span>
                </a>
                <a href="/leads.html" data-page="leads" class="active" aria-label="Lead Research" aria-current="page">
                    <span class="icon" aria-hidden="true">üîç</span>
                    <span>Lead Research</span>
                </a>
                <a href="/analytics.html" data-page="analytics" aria-label="Analytics">
                    <span class="icon" aria-hidden="true">üìà</span>
                    <span>Analytics</span>
                </a>
            </div>
            
            <div class="menu-section">
                <h4>Tools</h4>
                <a href="/bulk-upload.html" data-page="bulk-upload" aria-label="Bulk Research">
                    <span class="icon" aria-hidden="true">üì§</span>
                    <span>Bulk Research</span>
                </a>
                <a href="/messages.html" data-page="messages" aria-label="Message Studio">
                    <span class="icon" aria-hidden="true">üí¨</span>
                    <span>Message Studio</span>
                </a>
                <a href="/campaigns.html" data-page="campaigns" aria-label="Campaigns">
                    <span class="icon" aria-hidden="true">üöÄ</span>
                    <span>Campaigns</span>
                </a>
                <a href="/integrations.html" data-page="integrations" aria-label="Integrations">
                    <span class="icon" aria-hidden="true">üîó</span>
                    <span>Integrations</span>
                </a>
            </div>
            
            <div class="menu-section">
                <h4>Account</h4>
                <a href="/subscription.html" data-page="subscription" aria-label="Subscription">
                    <span class="icon" aria-hidden="true">üí≥</span>
                    <span>Subscription</span>
                </a>
                <a href="/settings.html" data-page="settings" aria-label="Settings">
                    <span class="icon" aria-hidden="true">‚öôÔ∏è</span>
                    <span>Settings</span>
                </a>
            </div>
        </nav>
        
        <!-- Subscription Status -->
        <div class="subscription-status">
            <h4>Current Plan</h4>
            <p class="plan-name" id="plan-name">Loading...</p>
            <p class="credits-info">
                <span id="credits-remaining">--</span> credits remaining
            </p>
            <a href="/subscription.html" data-page="subscription">Manage Subscription</a>
        </div>
        
        <!-- User Info -->
        <div class="user-info">
            <p id="user-email">Loading...</p>
            <a href="javascript:void(0)" id="logout-btn" role="button" aria-label="Sign out">Sign Out</a>
        </div>
    </aside>
    
    <!-- Mobile Menu Toggle -->
    <button class="mobile-menu-toggle" id="mobile-menu-toggle" aria-label="Toggle navigation menu">
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
        <span class="hamburger-line"></span>
    </button>
    
    <!-- Main Content -->
    <main class="main-content" role="main">
        <!-- Header -->
        <header>
            <div class="header-text">
                <h1>Lead Research Intelligence</h1>
                <p class="header-subtitle">Independent exploration and qualification lab for strategic prospecting</p>
            </div>
            <div class="header-actions">
                <button class="secondary-btn" id="export-research-btn" aria-label="Export research data">
                    <span aria-hidden="true">üì•</span>
                    <span>Export Research</span>
                </button>
                <button class="secondary-btn" id="saved-leads-btn" aria-label="View saved leads">
                    <span aria-hidden="true">üìÇ</span>
                    <span>Saved Leads</span>
                </button>
                <button class="primary-btn" id="new-research-btn" aria-label="Start new research">
                    <span aria-hidden="true">üî¨</span>
                    <span>New Research</span>
                </button>
            </div>
        </header>
        
        <!-- Research Interface -->
        <div class="research-interface">
            <!-- Main Research Area -->
            <div class="research-main">
                <!-- Search Section -->
                <section class="search-section" aria-labelledby="search-heading">
                    <div class="search-header">
                        <h2 id="search-heading">Lead Intelligence Search</h2>
                        <p>Enter any Instagram username or LinkedIn profile to begin deep analysis</p>
                    </div>
                    
                    <div class="search-input-group">
                        <label for="research-input" class="sr-only">Profile URL or Username</label>
                        <input 
                            type="text" 
                            id="research-input" 
                            class="search-field" 
                            placeholder="Enter @username or profile URL..."
                            aria-label="Profile URL or username for analysis"
                            autocomplete="off"
                            spellcheck="false"
                        >
                        <button class="primary-btn" id="analyze-lead-btn" type="button">
                            <span aria-hidden="true">üîç</span>
                            <span>Analyze Lead</span>
                        </button>
                    </div>
                    
                    <!-- Status Messages -->
                    <div class="status-message" id="status-message" role="alert" aria-live="polite"></div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="quick-action-btn" id="upload-file-btn" type="button" aria-label="Upload file for bulk analysis">
                            <span aria-hidden="true">üìÑ</span>
                            <span>Upload File</span>
                        </button>
                        <button class="quick-action-btn" id="paste-urls-btn" type="button" aria-label="Paste multiple URLs">
                            <span aria-hidden="true">üìã</span>
                            <span>Paste URLs</span>
                        </button>
                        <button class="quick-action-btn" id="sample-analysis-btn" type="button" aria-label="Try sample analysis">
                            <span aria-hidden="true">üéØ</span>
                            <span>Try Sample</span>
                        </button>
                    </div>
                    
                    <!-- File Upload (Hidden) -->
                    <input type="file" id="file-upload" accept=".csv,.xlsx,.xls" style="display: none;" aria-label="Upload CSV or Excel file">
                </section>

                <!-- Lead Context Card -->
                <section class="lead-context-card" id="lead-context-card" aria-labelledby="lead-profile-heading">
                    <!-- Lead Header -->
                    <div class="lead-header">
                        <img src="https://via.placeholder.com/80" alt="" class="lead-avatar" id="lead-avatar">
                        <div class="lead-details">
                            <h3 class="lead-name" id="lead-name">--</h3>
                            <p class="lead-handle" id="lead-handle">@--</p>
                            <p class="lead-bio" id="lead-bio">No profile loaded</p>
                            <div class="lead-badges" id="lead-badges"></div>
                        </div>
                    </div>
                    
                    <!-- Lead Metrics -->
                    <div class="lead-metrics" role="region" aria-label="Profile metrics">
                        <div class="metric-card">
                            <div class="metric-value" id="followers-count">--</div>
                            <div class="metric-label">Followers</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="following-count">--</div>
                            <div class="metric-label">Following</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="posts-count">--</div>
                            <div class="metric-label">Posts</div>
                        </div>
                        <div class="metric-card">
                            <div class="metric-value" id="engagement-rate">--%</div>
                            <div class="metric-label">Engagement</div>
                        </div>
                    </div>
                    
                    <!-- Opportunity Meter -->
                    <div class="opportunity-meter" role="region" aria-labelledby="opportunity-heading">
                        <h4 id="opportunity-heading" class="meter-title">Opportunity Score</h4>
                        <div class="meter-container">
                            <div class="meter-visual" id="meter-visual" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100">
                                <div class="meter-score" id="opportunity-score">0</div>
                            </div>
                        </div>
                        <p class="meter-subtitle">AI-powered lead qualification</p>
                    </div>
                    
                    <!-- Score Factors -->
                    <div class="score-factors" role="region" aria-labelledby="factors-heading">
                        <h4 id="factors-heading">Score Breakdown</h4>
                        <ul id="score-factors-list" aria-label="Score factors">
                            <li>ICP alignment: --%</li>
                            <li>Engagement quality: --%</li>
                            <li>Monetization readiness: --%</li>
                            <li>Growth trajectory: --%</li>
                        </ul>
                    </div>
                    
                    <!-- Lead Insights -->
                    <div class="lead-insights">
                        <div class="insight-section" role="region" aria-labelledby="reasons-heading">
                            <h4 id="reasons-heading">
                                <span aria-hidden="true">üéØ</span>
                                Key Reasons
                            </h4>
                            <ul id="analysis-reasons" aria-label="Analysis reasons">
                                <li>No analysis completed yet</li>
                            </ul>
                        </div>
                        
                        <div class="insight-section" role="region" aria-labelledby="selling-points-heading">
                            <h4 id="selling-points-heading">
                                <span aria-hidden="true">üí°</span>
                                Selling Points
                            </h4>
                            <ul id="selling-points" aria-label="Selling points">
                                <li>No analysis completed yet</li>
                            </ul>
                        </div>
                    </div>
                    
                    <!-- AI Summary -->
                    <div class="ai-summary" role="region" aria-labelledby="summary-heading">
                        <h4 id="summary-heading">
                            <span aria-hidden="true">üß†</span>
                            AI Analysis Summary
                        </h4>
                        <p id="analysis-summary">Complete an analysis to see AI-generated insights about this lead's potential and engagement patterns.</p>
                    </div>
                    
                    <!-- Lead Actions -->
                    <div class="lead-actions" role="group" aria-label="Lead actions">
                        <button class="action-btn" id="save-lead-btn" type="button" aria-label="Save lead to database">
                            <span class="icon" aria-hidden="true">üíæ</span>
                            <span>Save Lead</span>
                        </button>
                        <button class="action-btn" id="generate-message-btn" type="button" aria-label="Generate personalized message">
                            <span class="icon" aria-hidden="true">‚úçÔ∏è</span>
                            <span>Generate Message</span>
                        </button>
                        <button class="action-btn" id="add-to-list-btn" type="button" aria-label="Add to prospect list">
                            <span class="icon" aria-hidden="true">üìù</span>
                            <span>Add to List</span>
                        </button>
                        <button class="action-btn" id="find-similar-btn" type="button" aria-label="Find similar profiles">
                            <span class="icon" aria-hidden="true">üîç</span>
                            <span>Find Similar</span>
                        </button>
                        <button class="action-btn" id="export-profile-btn" type="button" aria-label="Export profile data">
                            <span class="icon" aria-hidden="true">üì§</span>
                            <span>Export Profile</span>
                        </button>
                        <button class="action-btn" id="compare-leads-btn" type="button" aria-label="Compare with other leads">
                            <span class="icon" aria-hidden="true">‚öñÔ∏è</span>
                            <span>Compare</span>
                        </button>
                    </div>
                    
                    <!-- Notes Section -->
                    <div class="notes-section" role="region" aria-labelledby="notes-heading">
                        <h4 id="notes-heading">
                            <span aria-hidden="true">üìù</span>
                            Research Notes
                        </h4>
                        <label for="lead-notes" class="sr-only">Notes about this lead</label>
                        <textarea 
                            id="lead-notes" 
                            class="form-textarea" 
                            placeholder="Add your research notes, observations, and follow-up actions..."
                            aria-label="Research notes for this lead"
                        ></textarea>
                        <p class="notes-help">Notes are automatically saved as you type</p>
                    </div>
                    
                    <!-- Tags Section -->
                    <div class="tags-section" role="region" aria-labelledby="tags-heading">
                        <h4 id="tags-heading">
                            <span aria-hidden="true">üè∑Ô∏è</span>
                            Tags & Categories
                        </h4>
                        <div class="tag-chips" role="group" aria-label="Available tags">
                            <button class="tag-chip" data-tag="hot-prospect" type="button">Hot Prospect</button>
                            <button class="tag-chip" data-tag="decision-maker" type="button">Decision Maker</button>
                            <button class="tag-chip" data-tag="high-engagement" type="button">High Engagement</button>
                            <button class="tag-chip" data-tag="competitor" type="button">Competitor</button>
                            <button class="tag-chip" data-tag="influencer" type="button">Influencer</button>
                            <button class="tag-chip" data-tag="follow-up" type="button">Follow Up</button>
                            <button class="tag-chip" data-tag="partnership" type="button">Partnership</button>
                            <button class="tag-chip" data-tag="cold-outreach" type="button">Cold Outreach</button>
                        </div>
                        <label for="tag-input" class="sr-only">Add custom tag</label>
                        <input 
                            type="text" 
                            id="tag-input" 
                            class="tag-input" 
                            placeholder="Add custom tag and press Enter..."
                            aria-label="Add custom tag"
                        >
                    </div>
                </section>
            </div>
            
            <!-- Research Sidebar -->
            <aside class="research-sidebar" role="complementary" aria-label="Research tools and history">
                <!-- Progress Tracking -->
                <div class="sidebar-section" id="progress-section" style="display: none;">
                    <h3>
                        <span class="icon" aria-hidden="true">üìä</span>
                        Progress
                    </h3>
                    <div class="progress-container">
                        <div class="progress-bar" id="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <p class="progress-text" id="progress-text">Ready to analyze</p>
                </div>
                
                <!-- Quick Stats -->
                <div class="sidebar-section">
                    <h3>
                        <span class="icon" aria-hidden="true">üìà</span>
                        Today's Activity
                    </h3>
                    <div class="quick-stats">
                        <div class="stat-item">
                            <span class="stat-value" id="analyses-today">0</span>
                            <span class="stat-label">Analyses</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="leads-saved">0</span>
                            <span class="stat-label">Saved</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-value" id="messages-generated">0</span>
                            <span class="stat-label">Messages</span>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Analyses -->
                <div class="sidebar-section">
                    <h3>
                        <span class="icon" aria-hidden="true">üïí</span>
                        Recent Analyses
                    </h3>
                    <div class="recent-analyses" id="recent-analyses">
                        <p class="empty-state">No recent analyses</p>
                    </div>
                </div>
                
                <!-- Research Tips -->
                <div class="sidebar-section">
                    <h3>
                        <span class="icon" aria-hidden="true">üí°</span>
                        Research Tips
                    </h3>
                    <div class="tips-content">
                        <div class="tip-item">
                            <h5>üéØ Quality Over Quantity</h5>
                            <p>Focus on profiles that align with your ICP for better conversion rates.</p>
                        </div>
                        <div class="tip-item">
                            <h5>üìä Check Engagement</h5>
                            <p>Look for consistent engagement patterns, not just follower count.</p>
                        </div>
                        <div class="tip-item">
                            <h5>üîç Profile Completeness</h5>
                            <p>Complete profiles with bio and contact info show professionalism.</p>
                        </div>
                    </div>
                </div>
                
                <!-- Export Options -->
                <div class="sidebar-section">
                    <h3>
                        <span class="icon" aria-hidden="true">üì§</span>
                        Quick Export
                    </h3>
                    <div class="export-buttons">
                        <button class="export-btn" id="export-json-btn" type="button" aria-label="Export as JSON">
                            <span aria-hidden="true">üìÑ</span>
                            <span>JSON</span>
                        </button>
                        <button class="export-btn" id="export-csv-btn" type="button" aria-label="Export as CSV">
                            <span aria-hidden="true">üìä</span>
                            <span>CSV</span>
                        </button>
                        <button class="export-btn" id="export-sheets-btn" type="button" aria-label="Export to Google Sheets">
                            <span aria-hidden="true">üìã</span>
                            <span>Sheets</span>
                        </button>
                    </div>
                </div>
            </aside>
        </div>
    </main>
    
    <!-- Keyboard Shortcuts Modal -->
    <div class="modal-overlay" id="shortcuts-modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Keyboard Shortcuts</h3>
                <button class="close-btn" type="button" aria-label="Close shortcuts modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="shortcuts-grid">
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>Enter</kbd>
                        <span>Analyze Lead</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>S</kbd>
                        <span>Save Lead</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Escape</kbd>
                        <span>Clear Analysis</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>E</kbd>
                        <span>Export Data</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>Ctrl</kbd> + <kbd>N</kbd>
                        <span>New Research</span>
                    </div>
                    <div class="shortcut-item">
                        <kbd>?</kbd>
                        <span>Show Shortcuts</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Help Button -->
    <button class="help-btn" id="help-btn" type="button" aria-label="Show keyboard shortcuts">
        <span aria-hidden="true">?</span>
    </button>
    
    <!-- Scripts -->
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <script src="/config.js"></script>
    <script src="/js/shared-code.js"></script>
    <script src="/js/leads.js"></script>
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('/sw.js').catch(console.warn);
        }
    </script>
    
    <!-- Analytics (if configured) -->
    <script>
        if (window.CONFIG?.ANALYTICS_ID) {
            // Analytics initialization would go here
            console.log('Analytics configured');
        }
    </script>
</body>
</html>
