@layer components {
  /* =============================================================================
     SIDEBAR CORE LAYOUT - FIXED WIDTH SYSTEM
     ============================================================================= */
  
  .sidebar {
    @apply fixed left-0 top-0 h-full w-64 bg-gradient-to-br from-white via-blue-50/30 to-indigo-100/20 backdrop-blur-xl border-r border-gray-200/50 flex flex-col transition-all duration-300 z-40;
  }

  .sidebar.collapsed {
    @apply w-16;
  }

  .sidebar::after {
    content: '';
    @apply absolute top-0 right-0 w-px h-full bg-gradient-to-b from-transparent via-gray-200 to-transparent;
  }

  /* Main content layout compensation */
  .main-content {
    @apply transition-all duration-300;
    margin-left: 256px; /* Fixed 16rem = 256px */
  }

  .main-content.sidebar-collapsed {
    margin-left: 64px; /* Fixed 4rem = 64px */
  }

  /* =============================================================================
     SIDEBAR CONTAINER
     ============================================================================= */

  .sidebar-container {
    @apply flex flex-col h-full overflow-hidden w-full;
  }

  /* =============================================================================
     SIDEBAR HEADER
     ============================================================================= */

  .sidebar-header {
    @apply p-4 border-b border-gray-200/50 transition-all duration-300;
  }

  .sidebar-header.collapsed {
    @apply p-2 flex flex-col items-center gap-2;
  }

  .sidebar-logo-container {
    @apply flex items-center gap-3 mb-4;
  }

  .sidebar-logo-container.collapsed {
    @apply justify-center mb-2;
  }

  .sidebar-logo-image {
    @apply w-8 h-8 rounded-lg;
  }

  .sidebar-logo-text {
    @apply text-xl font-bold text-gray-900 tracking-tight transition-opacity duration-300;
  }

  .sidebar-logo-text.collapsed {
    @apply opacity-0 w-0 overflow-hidden;
  }

  .sidebar-toggle {
    @apply p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-all duration-200;
  }

  .sidebar-toggle.collapsed {
    @apply p-1.5 w-8 h-8 flex items-center justify-center;
  }

  .sidebar-toggle-icon {
    @apply w-5 h-5 transition-transform duration-300;
  }

  .sidebar-toggle-icon.collapsed {
    @apply w-4 h-4 rotate-180;
  }

  /* =============================================================================
     SIDEBAR NAVIGATION
     ============================================================================= */

  .sidebar-nav {
    @apply flex-1 overflow-y-auto p-4 space-y-6;
  }

  .sidebar-nav.collapsed {
    @apply p-1;
  }

  .nav-section {
    @apply space-y-3;
  }

  .nav-section.collapsed {
    @apply space-y-2;
  }

  .nav-section-header {
    @apply px-2 text-xs font-bold text-gray-500 uppercase tracking-wider transition-opacity duration-300;
  }

  .nav-section-header.collapsed {
    @apply opacity-0 h-0 overflow-hidden;
  }

  .nav-items {
    @apply space-y-1;
  }

  /* =============================================================================
     NAVIGATION ITEMS
     ============================================================================= */

  .nav-item {
    @apply flex items-center gap-3 px-3 py-2.5 text-gray-700 hover:text-gray-900 hover:bg-gradient-to-r hover:from-blue-500 hover:to-purple-600 hover:text-white rounded-lg transition-all duration-200 cursor-pointer relative min-h-11;
  }

  .nav-item.collapsed {
    @apply justify-center gap-0 px-2 w-12 mx-auto;
  }

  .nav-item.active {
    @apply bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg;
  }

  .nav-item:hover {
    @apply transform -translate-y-0.5 shadow-md;
  }

  .nav-icon {
    @apply w-5 h-5 flex-shrink-0 transition-transform duration-200 group-hover:scale-110;
  }

  .nav-text {
    @apply font-medium transition-opacity duration-300;
  }

  .nav-text.collapsed {
    @apply opacity-0 w-0 overflow-hidden;
  }

  /* =============================================================================
     TOOLTIP FOR COLLAPSED STATE
     ============================================================================= */

  .nav-item.collapsed {
    @apply relative;
  }

  .nav-item.collapsed::after {
    content: attr(data-tooltip);
    @apply absolute left-full ml-2 px-2 py-1 bg-gray-900 text-white text-sm rounded opacity-0 pointer-events-none transition-opacity duration-200 whitespace-nowrap z-50;
  }

  .nav-item.collapsed:hover::after {
    @apply opacity-100;
  }

.sidebar-user-section {
  padding: 1rem !important;
  border-top: 1px solid rgba(229,231,235,0.5) !important;
}

.sidebar-user-section.collapsed {
  padding: 0.5rem !important;
}

.sidebar-user-expanded {
  transition: opacity 0.3s ease !important;
}

.sidebar-user-expanded.collapsed {
  opacity: 0 !important;
  height: 0 !important;
  overflow: hidden !important;
}

.sidebar-user-collapsed {
  display: none !important;
  transition: opacity 0.3s ease !important;
}

.sidebar-user-collapsed.show {
  display: block !important;
}

.sidebar-user-info {
  background: linear-gradient(135deg, rgba(255,255,255,0.7) 0%, rgba(219,234,254,0.6) 50%, rgba(196,181,253,0.5) 100%) !important;
  backdrop-filter: blur(24px) !important;
  border: 1px solid rgba(255,255,255,0.3) !important;
  border-radius: 0.75rem !important;
  padding: 1rem !important;
  box-shadow: 0 8px 15px rgba(0,0,0,0.1) !important;
}

.sidebar-user-header {
  margin-bottom: 0.75rem !important;
}

.sidebar-user-email {
  font-size: 0.875rem !important;
  font-weight: 700 !important;
  color: #1f2937 !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
  margin-bottom: 0.25rem !important;
}

.sidebar-user-plan {
  display: inline-flex !important;
  align-items: center !important;
  padding: 0.25rem 0.5rem !important;
  background: linear-gradient(to right, rgba(219,234,254,1), rgba(196,181,253,1)) !important;
  font-size: 0.75rem !important;
  font-weight: 700 !important;
  color: #1d4ed8 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  border-radius: 9999px !important;
  border: 1px solid rgba(59,130,246,0.5) !important;
}

.sidebar-user-credits {
  background: linear-gradient(to right, #3b82f6, #8b5cf6) !important;
  padding: 0.75rem !important;
  border-radius: 0.5rem !important;
  color: white !important;
  box-shadow: 0 8px 15px rgba(0,0,0,0.1) !important;
  margin-bottom: 0.75rem !important;
}

.sidebar-user-credits-header {
  display: flex !important;
  justify-content: space-between !important;
  align-items: center !important;
}

.sidebar-user-credits-label {
  font-size: 0.75rem !important;
  font-weight: 700 !important;
  text-transform: uppercase !important;
  letter-spacing: 0.05em !important;
  opacity: 0.9 !important;
}

.sidebar-user-credits-count {
  font-size: 1.25rem !important;
  font-weight: 900 !important;
}

.sidebar-user-credits-icon {
  font-size: 1.25rem !important;
  opacity: 0.8 !important;
}

.sidebar-user-actions {
  display: flex !important;
  flex-direction: column !important;
  gap: 0.5rem !important;
}

.sidebar-user-button {
  width: 100% !important;
  padding: 0.5rem 0.75rem !important;
  font-size: 0.875rem !important;
  font-weight: 500 !important;
  color: #374151 !important;
  border-radius: 0.5rem !important;
  transition: all 0.2s ease !important;
  background: none !important;
  border: none !important;
  cursor: pointer !important;
}

.sidebar-user-button:hover {
  color: #1f2937 !important;
  background-color: #f3f4f6 !important;
}

.sidebar-user-button.primary {
  background: linear-gradient(to right, #3b82f6, #8b5cf6) !important;
  color: white !important;
}

.sidebar-user-button.primary:hover {
  background: linear-gradient(to right, #2563eb, #7c3aed) !important;
}

.sidebar-user-avatar {
  width: 2.5rem !important;
  height: 2.5rem !important;
  background: linear-gradient(to right, #3b82f6, #8b5cf6) !important;
  border-radius: 50% !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  color: white !important;
  font-weight: 700 !important;
  font-size: 0.875rem !important;
  margin: 0 auto !important;
  cursor: pointer !important;
  transition: transform 0.2s ease !important;
}

.sidebar-user-avatar:hover {
  transform: scale(1.1) !important;
}

/* Mobile responsiveness */
@media (max-width: 1024px) {
  .sidebar {
    transform: translateX(-100%) !important;
  }

  .sidebar.open {
    transform: translateX(0) !important;
  }

  .main-content {
    margin-left: 0 !important;
  }

  .sidebar-overlay {
    position: fixed !important;
    inset: 0 !important;
    background-color: rgba(0,0,0,0.5) !important;
    z-index: 30 !important;
    opacity: 0 !important;
    pointer-events: none !important;
    transition: opacity 0.3s ease !important;
  }

  .sidebar-overlay.show {
    opacity: 1 !important;
    pointer-events: auto !important;
  }
}

@media (max-width: 768px) {
  .sidebar {
    width: 100% !important;
    max-width: 24rem !important;
  }

  .nav-item {
    padding: 1rem 0.75rem !important;
  }

  .sidebar-user-info {
    padding: 0.75rem !important;
  }
}
